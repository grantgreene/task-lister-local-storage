(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();class c{constructor(){this.tasks=[]}getTasksFromLocalStorage(){return localStorage.getItem("tasks")===null?this.tasks=[]:this.tasks=JSON.parse(localStorage.getItem("tasks")),this.tasks}saveTasksToLocalStorage(){localStorage.setItem("tasks",JSON.stringify(this.tasks))}}const o=new c;class d{static buildTaskHtml(e){const s=document.createElement("div");s.classList="task-card";for(const a in e)if(a==="taskId")s.dataset.id=e[a];else if(a==="taskDate"){const t=document.createElement("p");t.classList="task-card__date";const n=new Date(e[a]).toLocaleDateString("en-Us",{timeZone:"UTC"});t.textContent=`${n}`,new Date(n)<new Date&&t.classList.add("past-due"),s.appendChild(t)}else if(a==="taskDelete"){const t=document.createElement("span");t.classList="task-card__delete";const n=document.createElement("i");n.classList="fa-solid fa-trash-can",t.appendChild(n),s.appendChild(t)}else if(a==="taskName"){const t=document.createElement("h1");t.classList="task-card__name",t.textContent=`${e[a]}`,s.appendChild(t)}else if(a==="taskStatus"){const t=document.createElement("p");t.classList="task-card__status";const n=document.createElement("span");n.textContent="Status: ";const i=document.createTextNode(`${e[a]} `),l=document.createElement("i");l.classList="fa-solid fa-caret-down",t.appendChild(n),t.appendChild(i),t.appendChild(l),s.appendChild(t)}return s}static addTasksToUi(){document.querySelector(".tasks").innerHTML="",o.getTasksFromLocalStorage(),o.tasks.length===0?document.querySelector(".no-tasks").classList.add("show"):(document.querySelector(".no-tasks").classList.remove("show"),o.tasks.forEach(e=>{const s=this.buildTaskHtml(e);document.querySelector(".tasks").appendChild(s)})),document.querySelector(".filter-category").value="show all"}}class u{constructor(){this.addNewMobileBtn=document.querySelector(".top-pane__btn"),this.addTaskPane=document.querySelector(".add-task-pane"),this.addNewTaskBtn=document.querySelector(".add-task-pane__btn"),this.addTaskNameInput=document.querySelector(".add-task-pane__name-input"),this.addTaskDateInput=document.querySelector(".add-task-pane__date-input"),this.alertNotification=document.querySelector(".alert"),this.addEventListeners()}toggleMobileDropdown(){this.addTaskPane.classList.toggle("open"),this.addTaskPane.classList.contains("open")?(this.addNewMobileBtn.textContent="x")&&(this.addNewMobileBtn.style.backgroundColor="var(--c-red)"):(this.addNewMobileBtn.textContent="+")&&(this.addNewMobileBtn.style.backgroundColor="var(--c-green")}showAlert(e){this.alertNotification.classList.add("show"),this.alertNotification.children[0].textContent=`${e}`,setTimeout(()=>{this.alertNotification.classList.remove("show")},3e3)}addNewTask(){let e=this.addTaskNameInput.value,s=this.addTaskDateInput.value,a;if(e===""&&s===""){this.showAlert("Please enter a task name and task date");return}else if(e===""){this.showAlert("Please enter a task name");return}else if(s===""){this.showAlert("Please enter a task date");return}o.tasks.length===0?a=1:a=o.tasks[o.tasks.length-1].taskId+1;const t={taskId:a,taskDate:s,taskName:e,taskStatus:"To-Do",taskDelete:!1};o.tasks.push(t),o.saveTasksToLocalStorage(),d.addTasksToUi(),this.addTaskNameInput.value="",this.addTaskDateInput.value="",this.toggleMobileDropdown()}addEventListeners(){this.addNewMobileBtn.addEventListener("click",this.toggleMobileDropdown.bind(this)),this.addNewTaskBtn.addEventListener("click",this.addNewTask.bind(this))}}class h{constructor(){this.searchTasksInput=document.querySelector(".search-tasks-input"),this.dateSortBtn=document.querySelectorAll(".date-sort"),this.filterCategorySelect=document.querySelector(".filter-category"),this.eventListeners()}searchTasks(e){let s=this.searchTasksInput.value.toLowerCase();this.filterCategorySelect.value="show all",document.querySelectorAll(".task-card").forEach(t=>{t.children[1].textContent.toLowerCase().indexOf(s)===-1&&t.children[0].textContent.toLowerCase().indexOf(s)===-1?t.style.display="none":t.style.display="block"})}sortByDate(e){e.target.classList.contains("date-asc")?o.tasks.sort((s,a)=>s.taskDate.localeCompare(a.taskDate)):o.tasks.sort((s,a)=>a.taskDate.localeCompare(s.taskDate)),o.saveTasksToLocalStorage(),d.addTasksToUi()}filterCategories(e){const s=e.target.value;document.querySelectorAll(".task-card").forEach(t=>{s==="show all"||t.children[2].textContent.replace("Status: ","").trim().toLowerCase()===s?t.style.display="block":t.style.display="none"})}eventListeners(){this.searchTasksInput.addEventListener("keyup",this.searchTasks.bind(this)),this.dateSortBtn.forEach(e=>{e.addEventListener("click",this.sortByDate.bind(this))}),this.filterCategorySelect.addEventListener("change",this.filterCategories.bind(this))}}class k{constructor(){this.taskBoard=document.querySelector(".tasks"),this.editTaskId,this.eventListeners()}deleteTask(e){if(e.target.classList.contains("fa-trash-can")){const s=parseInt(e.target.parentElement.parentElement.dataset.id);o.tasks.splice(o.tasks.map(a=>a.taskId).indexOf(s),1),o.saveTasksToLocalStorage(),d.addTasksToUi()}}editTaskStatus(e){e.target.classList.contains("task-card__status")&&(this.editTaskId=parseInt(e.target.parentElement.dataset.id),document.dispatchEvent(new Event("openOverlayEvent"))),document.querySelectorAll(".update-status-box__option").forEach(s=>{s.addEventListener("click",a=>{let t=a.target.textContent,n=o.tasks.filter(i=>i.taskId===this.editTaskId)[0];n.taskStatus=t,o.tasks.splice(o.tasks.map(i=>i.taskId).indexOf(this.editTaskId),1,n),o.saveTasksToLocalStorage(),d.addTasksToUi(),document.dispatchEvent(new Event("closeOverlayEvent"))})})}eventListeners(){this.taskBoard.addEventListener("click",this.deleteTask),this.taskBoard.addEventListener("click",this.editTaskStatus)}}class p{constructor(){this.updateStatusOverlay=document.querySelector(".update-status-overlay"),this.eventListeners()}openOverlay(){this.updateStatusOverlay.classList.add("open")}closeOverlay(){this.updateStatusOverlay.classList.remove("open")}eventListeners(){document.addEventListener("openOverlayEvent",this.openOverlay.bind(this)),document.addEventListener("closeOverlayEvent",this.closeOverlay.bind(this)),document.addEventListener("click",e=>{e.target.classList.contains("update-status-box__close")&&this.closeOverlay()})}}d.addTasksToUi();new u;new h;new k;new p;
